name: message-workflow
run-name: ${{github.actor}} is running the message-workflow
on:
  push:
    branches: ["master"]
  workflow_call:
    outputs:
      message:
        description: "Output Message"
        value: ${{ jobs.list_job.outputs.message }}
      data:
        description: "Output Data"
        value: ${{ jobs.list_job.outputs.data }}
env:
  for: myself
  stack: "ga,wp,es,pr,ja,js,py,sh"

jobs:
  list_job:
    outputs:
      message: ${{ steps.my_step.outputs.message }}
      data: ${{ steps.my_step.outputs.data }}
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]
        node: [14, 16, 20]
    steps:
      - name: node-version-checker
        run: node --version
      - name: my-step-one
        id: my_step
        if: ${{ env.for == 'myself' }}
        run: |
          echo "This is for you"
          echo "message=${{ env.stack }}" >> $GITHUB_OUTPUT
      - name: step-one
        id: step_one
        if: ${{ !cancelled() && env.for != 'myself' }}
        run: |
          echo "Impossible"
